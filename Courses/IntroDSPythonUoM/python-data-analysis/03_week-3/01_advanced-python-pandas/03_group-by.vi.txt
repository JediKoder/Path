Chúng ta đã thấy rằng mặc dù panda cho phép chúng ta lặp mỗi hàng trong khung dữ liệu đó là cách chậm để thực hiện một nhiệm vụ cho trước và nó rất không hay. Ví dụ nếu bạn muốn viết mã để lặp tất cả các bang và tạo ra một danh sách điều tra dân số trung bình. CHúng ta có thể làm sử dụng vòng lặp trong chức năng đặc biệt. Lựa chọn khác nữa là để sử dụng khung dữ liệu nhóm lại bởi chức năng. Chức năng này lấy một số tên cột hoặc các tên và chia khung dữ liệu thành các khối dựa trên các tên, nó trả về nhóm khung dữ liệu theo đối tượng. Điều này có thể được lặp và sau đó trả về một tập hợp nơi mà mục đầu tiên là điều kiện nhóm, mục thứ hai là khung dữ liệu bị giảm bởi nhóm đó. Bởi vì nó tạo ra hai giá trị, bạn có thể giải nén và thực hiện cột mà bạn quan tâm để tính trung bình. Đây là một số ví dụ về cả hai phương pháp hoạt động. Đầu tiên hãy tải dữ liệu điều tra dân số sau đó loại trừ tổng hợp mức, cái mà có giá trị tổng là 40. Đây là các ví dụ về các phương pháp hoạt động. Đầu tiên hãy tải dữ liệu điều tra dân số, sau đó loại trừ tổng hợp mức độ cái mà có tổng là 40. Trong phần đầu chungst a đã sử dụng điều tra dân số. Chúng ta có danh sách các bang. Mỗi bạng chúng ta giảm khung dữ liệu và tính toán trung bình. Nếu chúng ta làm điều này chúng ta sẽ thấy mất một khoảng thời gian. Tôi đã tạo một vòng lặp ở đây nó đến 10 bởi vì tôi đang tải. Đây là tiếp cận với nhóm bằng đối tượng. Chúng ta nói hàm panda chúng ta quan tâm nhóm và với tên bang sau đó chúng ta tính trung bình sử dụng một cột và tất cả dữ liệu trong cột đó. Khi chúng ta làm nó chúng ta thấy sự khác biệt lớn trong tốc độ. Bây giờ 99% thời gian bạn sẽ sử dụng nhóm bằng một hoặc nhiều cột. Nhưng bạn có thể cung cấp một chức năng để nhóm và sử dụng điều đó để phân khúc dữ liệu của bạn. Đây là một ví dụ được chế tạo nhưng giả sử bạn có một công việc lớn với rất nhiều quá trình và bạn muốn chỉ làm một phần ba. Chúng ta có thể tạo ra một số chức năng trả về một số giữa 0 và 2 dựa trên đặc điểm đầu tiên của câu lệnh. Sau đó chúng ta có thể lập nhóm bằng cách sử dụng chức năng này để chia khung dữ liệu của chúng ta. Cần lưu ý là để làm điều này chúng ta cần phải thiết lập chỉ số của khung dữ liệu là cột mà bạn muốn tạo nhóm đầu tiên. Đây là một ví dụ. Chúng ta sẽ tọa ra chức năng mới gọi là fun và nếu chữ đầu tiên của thông số là M chúng ta sẽ trả về 0. Nếu nó là Q chúng ta sẽ trả về 1 và nếu không chúng ta sẽ trả về 2. Sau đó chúng ta sẽ xuất chức nawngnayf vào khung dữ liệu trả lời, thấy rằng khung dữ liệu được phân đoạn theo số nhóm đã được tính toán. Loại kĩ thuật này là phân loại trọng lượng, được sử dụng phổ biến để phân phối các nhiệm vụ. Cho dù chúng ta cốt lõi trong bộ xử lí, các nút trong siêu máy tính hay các đĩa trong cơ sở dữ liệu. Một nhiệm vụ phổ biến với nhóm mà bạn tách dữ liệu, bạn áp dụng một số chức năng sau đó bạn kết hợp các kết quả. Điều này được gọi là ứng dụng phân tách kết hợp mô hình. Và chúng ta đã thấy phương pháp chia tách nhưng áp dụng cái gì? Các phương pháp lặp như chúng ta đã thấy có thể làm điều này nhưng đối tượng nhóm cũng có một phương pháp gọi là agg viết tắt của từ tổng hợp. Phương pháp này áp dụng một chức năng cho cột hoặc các cột của dữ liệu trong nhóm và trả lại kết quả. Với agg bạn chỉ đơn giản xuất trong thư viện nên cột mà bạn quan tâm, chức năng mà bạn muốn áp dụng. Ví dụ để xây dựng một khung dữ liệu tóm tắt dân số trung bình mỗi bang. Chúng ta chỉ có thể đưa ra agg một thứ viện với điều tra dân số năm 2010 và chức năng trung bình numb/pie. Bây giờ tôi muốn gắn một vấn đề tiềm năng và sử dụng phương pháp tổng hợp của nhóm các đối tượng. Khi nào bạn xuất trong thư viện nó có thể đước sử dụng để xác định các cột để áp dụng một chức năng hoặc để đặt tên một cột đầu ra nếu có các chức năng được chạy. Sự khác biệt phụ thuộc vào các chìa khóa mà bạn xuất trong thư viện và cách chúng được đặt tên. Tóm lại trong khi nhiều tài liệu và các ví dụ sẽ nói về đối tượng nhóm đơn, thì thực sự có hai đối tượng khác nhau. Nhóm khung dữ liệu và nhóm chuỗi. Các đôi tượng hoạt động khác nhau một chút với agg. Ví dụ chúng ta lấy dữ liệu điều tra dân số và chuyển nó thành chuỗi với tên bang như là chỉ số và các cột là điều tra dân số 2010. Sau đó chúng ta có thể tạo nhóm bằng chỉ mục sử dụng thông số định mức. Sau đó chúng ta dùng phương pháp agg nơi từ điển này có chức năng numpie trung bình và chức năng numpie Hàm panda ứng dụng các chức năng với đối tượng chuỗi và chỉ có một cột dữ liệu áp dụng cả chức năng với cột đó và xuất đầu ra. Chúng ta có thể làm điều tương tự với một khung dữ liệu thay vì chuỗi. Chúng ta thiết lập chỉ mục là tên bang, chúng ta tạo nhóm bởi chỉ mục và chúng ta thực hiện hai cột. Dân số ước tính năm 2010, dân số ước tính năm 2011. Khi chúng ta dùng agg với hai thông số. Nó tạo ra một không gian cột và tất cả các chức năng được áp dụng. Nơi mà sự nhầm lẫn có thể xảy ra khi chúng ta thay đổi các nhãn của thư viện chúng ta đã xuất ra agg, tương ứng với các nhãn trong khung dữ liệu. Trong trường hợp này hàm panda nhận ra rằng chúng giống nhau và chức năng bản đồ với các cột thay vì tạo ra cột nhãn mác. Theo tôi điều này là hoạt động lẻ, không phải cái tôi muốn đưa ra sự thay đổi nhãn mác. Chỉ cần biết điều này khi sử dụng chức năng agg. Đó là nhóm theo chức năng. Tôi sử dụng nhóm theo chức năng thường xuyên trong công việc và nó rất tiện lợi cho việc phân khúc khung dữ liệu, hoạt động trên các phần nhỏ của khung dữ liệu, và sau đó tạo ra khung dữ liệu lớn hơn sau này.