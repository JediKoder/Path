1
00:00:08,757 --> 00:00:13,620
樞紐分析表(pivot table)是，為了特定目的，聚合DataFrame中的數據的一種方式。

2
00:00:13,620 --> 00:00:16,610
它大量使用聚合(agg)功能函數。

3
00:00:16,610 --> 00:00:20,830
Pivot table本身就是一個DataFrame，其中行代表一個變數，

4
00:00:20,830 --> 00:00:25,770
你感興趣的，列是另一個，和單元格是一些聚合值。

5
00:00:25,770 --> 00:00:29,190
Pivot ptable也往往包括邊際值，

6
00:00:29,190 --> 00:00:31,590
它們是每列和每列的總和。

7
00:00:31,590 --> 00:00:36,030
這樣您就可以看到兩個變數之間的關係

8
00:00:36,030 --> 00:00:36,640
一目了然地。

9
00:00:36,640 --> 00:00:38,980
我們來看一個例子。

10
00:00:38,980 --> 00:00:42,713
這裡我們加載一個新的數據集，cars.csv。

11
00:00:42,713 --> 00:00:46,275
該數據集來自加拿大政府的開放數據計劃。

12
00:00:46,275 --> 00:00:49,774
並提供有關不同電動車效率的資料，

13
00:00:49,774 --> 00:00:52,070
你可以購買的。

14
00:00:52,070 --> 00:00:54,326
當我們看看DataFrame的前面部分時，

15
00:00:54,326 --> 00:00:58,837
我們會看到，有模型的年分，供應商，汽車的尺寸和統計數據，

16
00:00:58,837 --> 00:01:01,364
如電池的大小以千瓦小時。

17
00:01:01,364 --> 00:01:06,009
Pivot table允許我們將這些列中的一個列轉換成新的列標題，

18
00:01:06,009 --> 00:01:09,980
並將其與另一列作為行索引進行比較。

19
00:01:09,980 --> 00:01:10,770
比如說，

20
00:01:10,770 --> 00:01:15,360
比方說，我們想比較電動汽車製造商與年分，

21
00:01:15,360 --> 00:01:19,770
而我們也想在電池容量方面進行比較。

22
00:01:19,770 --> 00:01:23,500
要做到這一點，我們告訴pandas，我們用values是'(kw)'千瓦，

23
00:01:23,500 --> 00:01:27,240
index是'YEAR'年份，列column是'Make'。

24
00:01:27,240 --> 00:01:30,369
然後我們指定的aggfunc聚合函數，

25
00:01:30,369 --> 00:01:32,667
在這裡我們將使用NumPy的功能mean。

26
00:01:32,667 --> 00:01:34,030
這是結果。

27
00:01:34,030 --> 00:01:35,806
我們看到有NaN值當

28
00:01:35,806 --> 00:01:39,918
供應商在某一年沒有記錄，像福特在2012年。

29
00:01:39,918 --> 00:01:43,937
我們看到，大多數供應商多年來，在電池容量沒有變化，

30
00:01:43,937 --> 00:01:47,010
除了Tesla，因為他們介紹了幾種新模型。

31
00:01:48,270 --> 00:01:52,250
Pivot table並不限於你可能想要應用的一個函數。

32
00:01:52,250 --> 00:01:55,905
你可以通過aggfunc，用不同的應用函數列表，

33
00:01:55,905 --> 00:02:00,110
Pandas將為您提供結果，使用層次結構的列名稱。

34
00:02:00,110 --> 00:02:02,822
在這裡，我也用margins等於true。

35
00:02:02,822 --> 00:02:06,882
你可以看到每個功能現在有一個all類別，

36
00:02:06,882 --> 00:02:10,687
它顯示總體平均值和最小值，在給定的年份和

37
00:02:10,687 --> 00:02:11,610
給定的供應商。

38
00:02:12,790 --> 00:02:14,300
這就是pivot table(樞紐分析表)。

39
00:02:14,300 --> 00:02:16,190
這一直是很短的描述，但

40
00:02:16,190 --> 00:02:19,180
它們是非常有用在處理數值資料時。

41
00:02:19,180 --> 00:02:22,670
當然，你可以傳遞你想要的任何函數給aggfunc聚合函式，

42
00:02:22,670 --> 00:02:24,460
包括那些您自己定義的。